<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyChat</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Authentication Container -->
    <div id="auth-container" class="auth-wrapper">
        <div class="auth-box">
            <h1 id="auth-title">Login</h1>
            <p id="auth-subtitle">Welcome back! Please enter your details.</p>
            
            <!-- Login Form (Visible by default) -->
            <form id="login-form">
                <input type="text" id="login-username" placeholder="Username" required>
                <input type="password" id="login-password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>

            <!-- Signup Form (Hidden by default) -->
            <form id="signup-form" class="hidden">
                <input type="text" id="signup-username" placeholder="Choose a Username" required>
                <input type="password" id="signup-password" placeholder="Choose a Password" required>
                <button type="submit">Sign Up</button>
            </form>

            <p id="auth-error" class="error-message"></p>
            <p class="toggle-auth">
                <span id="toggle-text">Don't have an account?</span>
                <a href="#" id="toggle-link">Sign Up</a>
            </p>
        </div>
    </div>

    <!-- Main Application Container -->
    <div id="app-container" class="app-wrapper hidden">
        <!-- Sidebar -->
        <aside id="sidebar">
            <div class="sidebar-header">
                <h2>Chats</h2>
                <div class="sidebar-actions">
                    <label class="theme-switch" for="theme-toggle" title="Toggle theme">
                        <input type="checkbox" id="theme-toggle">
                        <span class="slider"></span>
                    </label>
                    <button id="add-contact-button" class="icon-button" title="Add Contact">+</button>
                    <button id="profile-button" class="icon-button" title="My Profile">ðŸ‘¤</button>
                </div>
            </div>
            <div id="contact-list">
                <!-- Contact items will be dynamically inserted here -->
            </div>
            <button id="logout-button">Logout</button>
        </aside>

        <!-- Chat Window -->
        <main id="chat-window">
            <div id="welcome-screen">
                <h2>Welcome to the Chat!</h2>
                <p>Select a contact from the list to start messaging.</p>
            </div>

            <div id="active-chat-area" class="hidden">
                <div class="chat-header">
                    <button id="back-to-contacts" class="icon-button">&lt;</button>
                    <div class="chat-header-info">
                        <h3 id="chat-header-name"></h3>
                        <div class="chat-status">
                            <span id="online-status-indicator"></span>
                            <span id="chat-header-status"></span>
                            <span id="typing-indicator"></span>
                        </div>
                    </div>
                </div>
                <div id="message-list">
                    <!-- Messages will be dynamically inserted here -->
                </div>
                <form id="message-form">
                    <input type="text" id="message-input" placeholder="Type a message..." autocomplete="off">
                    <button type="submit">Send</button>
                </form>
            </div>
        </main>
    </div>

    <!-- Modal Backdrop -->
    <div id="modal-backdrop" class="modal-backdrop hidden"></div>

    <!-- User Code Modal (after signup) -->
    <div id="user-code-modal" class="modal hidden">
        <h2>Signup Successful!</h2>
        <p>Here is your unique User Code. Share it with others so they can add you as a contact.</p>
        <div id="user-code-display" class="user-code-box" title="Click to copy">
            <!-- User code will be inserted here -->
        </div>
        <button id="close-user-code-modal">Got it!</button>
    </div>

    <!-- Profile Modal -->
    <div id="profile-modal" class="modal hidden">
        <h2>My Profile</h2>
        <p><strong>Username:</strong> <span id="profile-username"></span></p>
        <p>Your unique User Code:</p>
        <div id="profile-user-code" class="user-code-box" title="Click to copy">
            <!-- User code will be inserted here -->
        </div>
        <button id="close-profile-modal">Close</button>
    </div>

    <!-- Add Contact Modal -->
    <div id="add-contact-modal" class="modal hidden">
        <h2>Add a New Contact</h2>
        <p>Enter the 6-character User Code of the person you want to chat with.</p>
        <form id="add-contact-form">
            <input type="text" id="add-contact-input" placeholder="Enter User Code" required maxlength="6">
            <p id="add-contact-error" class="error-message"></p>
            <div class="modal-actions">
                <button type="button" id="cancel-add-contact">Cancel</button>
                <button type="submit">Add Contact</button>
            </div>
        </form>
    </div>

    <!-- Toast Notification -->
    <div id="toast-notification" class="toast"></div>

    <script src="client.js"></script>
</body>
</html>

